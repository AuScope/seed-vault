

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>seed_vault.models.config &mdash; Seed Vault 0.1.2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=92734c54"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            Seed Vault
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../usage.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../app.html">Seed Vault App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cli.html">CLI commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../seed_vault.html">seed_vault package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../seed_vault.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../seed_vault.models.html">seed_vault.models package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../seed_vault.service.html">seed_vault.service package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../seed_vault.ui.html">seed_vault.ui package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../seed_vault.utils.html">seed_vault.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../seed_vault.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../seed_vault.html#module-seed_vault.cli">seed_vault.cli module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../seed_vault.html#module-seed_vault">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Seed Vault</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">seed_vault.models.config</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for seed_vault.models.config</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pydantic</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseModel</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">IO</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Any</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">datetime</span><span class="w"> </span><span class="kn">import</span> <span class="n">date</span><span class="p">,</span> <span class="n">timedelta</span><span class="p">,</span> <span class="n">datetime</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">enum</span><span class="w"> </span><span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">configparser</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">configparser</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConfigParser</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pickle</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">obspy</span><span class="w"> </span><span class="kn">import</span> <span class="n">UTCDateTime</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">.common</span><span class="w"> </span><span class="kn">import</span> <span class="n">RectangleArea</span><span class="p">,</span> <span class="n">CircleArea</span><span class="p">,</span> <span class="n">StatusHandler</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">.url_mapping</span><span class="w"> </span><span class="kn">import</span> <span class="n">UrlMappings</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">seed_vault.enums.config</span><span class="w"> </span><span class="kn">import</span> <span class="n">DownloadType</span><span class="p">,</span> <span class="n">WorkflowType</span><span class="p">,</span> <span class="n">GeoConstraintType</span><span class="p">,</span> <span class="n">Levels</span>


<span class="c1"># Convert start and end times to datetime</span>
<div class="viewcode-block" id="parse_time">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.parse_time">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">parse_time</span><span class="p">(</span><span class="n">time_str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `parse_time` attempts to parse a given time string in various formats and return it in</span>
<span class="sd">    ISO format.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">      time_str: The date-time in string format. Some acceptable input formats are:</span>
<span class="sd">                &#39;2014,2,1&#39; | &#39;2014001&#39; | &#39;2014,3,2,0,0,5&#39;</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">      The `parse_time` function is attempting to parse a time string using different formats. If</span>
<span class="sd">      successful, it returns the parsed time in ISO format. If parsing fails for all formats, it returns</span>
<span class="sd">      `None`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">UTCDateTime</span><span class="p">(</span><span class="n">time_str</span><span class="p">)</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">time_formats</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;%Y,%m,</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">,</span>         <span class="c1"># Format like &#39;2014,2,1&#39;</span>
            <span class="s1">&#39;%Y%j&#39;</span><span class="p">,</span>             <span class="c1"># Julian day format like &#39;2014001&#39;</span>
            <span class="s1">&#39;%Y,%m,</span><span class="si">%d</span><span class="s1">,%H,%M,%S&#39;</span> <span class="c1"># Format with time &#39;2014,3,2,0,0,5&#39;</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">time_format</span> <span class="ow">in</span> <span class="n">time_formats</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">time_str</span><span class="p">,</span> <span class="n">time_format</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">continue</span>
    <span class="k">return</span> <span class="kc">None</span></div>

    
<div class="viewcode-block" id="safe_add_to_config">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.safe_add_to_config">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `safe_add_to_config` safely adds key-value pairs to a configuration dictionary,</span>
<span class="sd">    handling any exceptions that may occur.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">      config: Config is a dictionary that stores configuration settings. It typically has sections as</span>
<span class="sd">              keys, where each section contains key-value pairs representing specific configuration </span>
<span class="sd">              settings. </span>
<span class="sd">              </span>
<span class="sd">      section: Section refers to a specific section within the configuration file </span>
<span class="sd">               where the key-value pair will be added. It helps organize and categorize different </span>
<span class="sd">               settings or options within the configuration file.</span>

<span class="sd">      key: The `key` parameter in the `safe_add_to_config` function refers to the key of the key-value</span>
<span class="sd">           pair that you want to add to the configuration. It is used to uniquely identify the value </span>
<span class="sd">           associated with it within a specific section of the configuration.</span>

<span class="sd">      value: Value is the data that you want to add to the configuration file under the specified</span>
<span class="sd">             section and key. It could be a string, integer, boolean, or any other data type that </span>
<span class="sd">             you want to store in the configuration.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">config</span><span class="p">[</span><span class="n">section</span><span class="p">][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">convert_to_str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to add </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">section</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="convert_to_str">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.convert_to_str">[docs]</a>
<span class="k">def</span><span class="w"> </span><span class="nf">convert_to_str</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The function `convert_to_str` converts various types of values to strings, handling different cases</span>
<span class="sd">    and providing error handling.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">      val: The `convert_to_str` function takes a value `val` as input and attempts to convert it to a</span>
<span class="sd">           string representation. It handles different types of values such as `None`, `Enum`, strings,</span>
<span class="sd">           integers, floats, booleans, objects with `__str__` method, and other unsupported</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">      The function `convert_to_str` returns a string representation of the input value `val`. It handles</span>
<span class="sd">      different types of input values and converts them to a string using various methods based on their</span>
<span class="sd">      type. If the conversion fails, it catches the exception and returns an empty string.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>  <span class="c1"># Convert None to empty string</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>  <span class="c1"># Convert Enum values to string</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>  <span class="c1"># Convert valid types to string</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="s1">&#39;__str__&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>  <span class="c1"># Use __str__ for objects</span>
        <span class="k">return</span> <span class="nb">repr</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>  <span class="c1"># Use repr for unsupported objects</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error converting value </span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span>  <span class="c1"># Return empty string if conversion fails</span></div>

            

<div class="viewcode-block" id="ProcessingConfig">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.ProcessingConfig">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">ProcessingConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class defines a configuration for processing with default values for the number of processes,</span>
<span class="sd">    gap tolerance, and logging.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">num_processes</span><span class="p">:</span> <span class="n">Optional</span>    <span class="p">[</span>  <span class="nb">int</span>         <span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">gap_tolerance</span><span class="p">:</span> <span class="n">Optional</span>    <span class="p">[</span>  <span class="nb">int</span>         <span class="p">]</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="mi">60</span>
    <span class="n">logging</span>      <span class="p">:</span> <span class="n">Optional</span>    <span class="p">[</span>  <span class="nb">str</span>         <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></div>



<div class="viewcode-block" id="AuthConfig">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.AuthConfig">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">AuthConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `AuthConfig` class defines attributes for network.station.location.channel code, username, and</span>
<span class="sd">    password.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">nslc_code</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># network.station.location.channel code</span>
    <span class="n">username</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">password</span><span class="p">:</span> <span class="nb">str</span></div>



<div class="viewcode-block" id="SeismoQuery">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoQuery">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SeismoQuery</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This Python class `SeismoQuery` represents a seismic query params with properties for network, station,</span>
<span class="sd">    location, channel, start time, and end time, along with methods to convert combined network and</span>
<span class="sd">    station string to individual properties.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">network</span> <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">station</span> <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">location</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">channel</span> <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">starttime</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">endtime</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmb_str_n_s</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span> 
        <span class="k">if</span> <span class="n">cmb_str_n_s</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cmb_str_n_s_to_props</span><span class="p">(</span><span class="n">cmb_str_n_s</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">cmb_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmb_str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="p">:</span>
            <span class="n">cmb_str</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">network</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="p">:</span>
            <span class="n">cmb_str</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="p">:</span>
            <span class="n">cmb_str</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">location</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="p">:</span>
            <span class="n">cmb_str</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="si">}</span><span class="s2">.&quot;</span>
        
        <span class="k">if</span> <span class="n">cmb_str</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">):</span>
            <span class="n">cmb_str</span> <span class="o">=</span> <span class="n">cmb_str</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">return</span> <span class="n">cmb_str</span>
    
<div class="viewcode-block" id="SeismoQuery.cmb_str_n_s_to_props">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoQuery.cmb_str_n_s_to_props">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">cmb_str_n_s_to_props</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cmb_n_s</span><span class="p">):</span>
        <span class="n">network</span><span class="p">,</span> <span class="n">station</span> <span class="o">=</span> <span class="n">cmb_n_s</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;network&#39;</span><span class="p">,</span> <span class="n">network</span><span class="p">)</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;station&#39;</span><span class="p">,</span> <span class="n">station</span><span class="p">)</span></div>
</div>


<div class="viewcode-block" id="DateConfig">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.DateConfig">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">DateConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class defines a DateConfig with optional start and end times, as well as optional before and</span>
<span class="sd">    after time definition used for events.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">start_time</span>  <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">date</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
    <span class="n">end_time</span>    <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">date</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
    <span class="n">start_before</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">date</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span>      <span class="kc">None</span>
    <span class="n">start_after</span> <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">date</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span>      <span class="kc">None</span>
    <span class="n">end_before</span>  <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">date</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span>      <span class="kc">None</span>
    <span class="n">end_after</span>   <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">date</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="p">]</span> <span class="o">=</span>      <span class="kc">None</span></div>



<div class="viewcode-block" id="WaveformConfig">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.WaveformConfig">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">WaveformConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `WaveformConfig` class defines a data model with optional fields for configuring waveform data</span>
<span class="sd">    requests, with a method to reset all fields to their default values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">client</span>           <span class="p">:</span> <span class="n">Optional</span>     <span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;EARTHSCOPE&quot;</span>
    <span class="n">channel_pref</span>     <span class="p">:</span> <span class="n">Optional</span>     <span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">location_pref</span>    <span class="p">:</span> <span class="n">Optional</span>     <span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">force_redownload</span> <span class="p">:</span> <span class="n">Optional</span>    <span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">days_per_request</span> <span class="p">:</span> <span class="n">Optional</span>     <span class="p">[</span><span class="nb">int</span><span class="p">]</span>             <span class="o">=</span> <span class="mi">1</span>

<div class="viewcode-block" id="WaveformConfig.set_default">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.WaveformConfig.set_default">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resets all fields to their default values.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__fields_set__</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">())</span></div>
</div>


<div class="viewcode-block" id="GeometryConstraint">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.GeometryConstraint">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">GeometryConstraint</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `GeometryConstraint` class defines a geometry constraint with a specified type and coordinates,</span>
<span class="sd">    automatically determining the constraint type based on the provided coordinates.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">geo_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">GeoConstraintType</span><span class="p">]</span> <span class="o">=</span> <span class="n">GeoConstraintType</span><span class="o">.</span><span class="n">NONE</span>
    <span class="n">coords</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="n">RectangleArea</span><span class="p">,</span> <span class="n">CircleArea</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">data</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="n">RectangleArea</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">geo_type</span> <span class="o">=</span> <span class="n">GeoConstraintType</span><span class="o">.</span><span class="n">BOUNDING</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">coords</span><span class="p">,</span> <span class="n">CircleArea</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">geo_type</span> <span class="o">=</span> <span class="n">GeoConstraintType</span><span class="o">.</span><span class="n">CIRCLE</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">geo_type</span> <span class="o">=</span> <span class="n">GeoConstraintType</span><span class="o">.</span><span class="n">NONE</span></div>



<div class="viewcode-block" id="StationConfig">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.StationConfig">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">StationConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `StationConfig` class defines configuration settings for querying seismic stations.</span>

<span class="sd">    This class allows users to specify parameters such as the seismic network, station selection, </span>
<span class="sd">    and geographical constraints while retrieving station metadata.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        client (Optional[str]): The FDSN client for retrieving station metadata. Defaults to `&quot;EARTHSCOPE&quot;`.</span>
<span class="sd">        force_stations (Optional[List[SeismoQuery]]): A list of stations to forcefully include in the query.</span>
<span class="sd">        exclude_stations (Optional[List[SeismoQuery]]): A list of stations to exclude from the query.</span>
<span class="sd">        date_config (DateConfig): The date range for station availability queries.</span>
<span class="sd">        local_inventory (Optional[str]): Path to a local station inventory file, if applicable.</span>
<span class="sd">        network (Optional[str]): The seismic network code (e.g., `&quot;IU&quot;`, `&quot;NE&quot;`) to filter stations.</span>
<span class="sd">        station (Optional[str]): The station code to filter results.</span>
<span class="sd">        location (Optional[str]): The location code for further filtering.</span>
<span class="sd">        channel (Optional[str]): The channel code (e.g., `&quot;BHZ&quot;`, `&quot;HHZ&quot;`) to specify station channels.</span>
<span class="sd">        highest_samplerate_only (bool): Whether to select only the station with the highest sample rate. Defaults to `False`.</span>
<span class="sd">        selected_invs (Optional[Any]): A list of pre-selected inventories.</span>
<span class="sd">        geo_constraint (Optional[List[GeometryConstraint]]): Geospatial constraints to filter stations.</span>
<span class="sd">        include_restricted (bool): Whether to include restricted (non-public) stations. Defaults to `False`.</span>
<span class="sd">        level (Levels): The level of station metadata detail to retrieve. Defaults to `Levels.CHANNEL`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">client</span>             <span class="p">:</span> <span class="n">Optional</span>   <span class="p">[</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;EARTHSCOPE&quot;</span>
    <span class="n">force_stations</span>     <span class="p">:</span> <span class="n">Optional</span>   <span class="p">[</span> <span class="n">List</span>          <span class="p">[</span><span class="n">SeismoQuery</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">exclude_stations</span>   <span class="p">:</span> <span class="n">Optional</span>   <span class="p">[</span> <span class="n">List</span>          <span class="p">[</span><span class="n">SeismoQuery</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">date_config</span>        <span class="p">:</span> <span class="n">DateConfig</span>                                <span class="o">=</span> <span class="n">DateConfig</span><span class="p">(</span>
        <span class="n">start_time</span><span class="o">=</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
        <span class="n">end_time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">local_inventory</span>    <span class="p">:</span> <span class="n">Optional</span>   <span class="p">[</span> <span class="nb">str</span>           <span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">network</span>            <span class="p">:</span> <span class="n">Optional</span>   <span class="p">[</span> <span class="nb">str</span>           <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;_GSN&quot;</span>
    <span class="n">station</span>            <span class="p">:</span> <span class="n">Optional</span>   <span class="p">[</span> <span class="nb">str</span>           <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span>
    <span class="n">location</span>           <span class="p">:</span> <span class="n">Optional</span>   <span class="p">[</span> <span class="nb">str</span>           <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span>
    <span class="n">channel</span>            <span class="p">:</span> <span class="n">Optional</span>   <span class="p">[</span> <span class="nb">str</span>           <span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;?H?,?N?&quot;</span>
    <span class="n">highest_samplerate_only</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">selected_invs</span>      <span class="p">:</span> <span class="n">Optional</span>   <span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">geo_constraint</span>     <span class="p">:</span> <span class="n">Optional</span>   <span class="p">[</span> <span class="n">List</span>          <span class="p">[</span><span class="n">GeometryConstraint</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">include_restricted</span> <span class="p">:</span> <span class="nb">bool</span>       <span class="o">=</span> <span class="kc">False</span>
    <span class="n">level</span>              <span class="p">:</span> <span class="n">Levels</span>     <span class="o">=</span> <span class="n">Levels</span>        <span class="o">.</span><span class="n">CHANNEL</span>

<div class="viewcode-block" id="StationConfig.Config">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.StationConfig.Config">[docs]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
        <span class="n">json_encoders</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">Any</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="kc">None</span>  
        <span class="p">}</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;selected_invs&quot;</span><span class="p">}</span></div>


<div class="viewcode-block" id="StationConfig.set_default">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.StationConfig.set_default">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resets all fields to their default values.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__fields_set__</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">())</span>                 </div>
</div>



    <span class="c1"># TODO: check if it makes sense to use SeismoLocation instead of separate</span>
    <span class="c1"># props.</span>
    <span class="c1"># seismo_location: List[SeismoLocation] = None</span>

    <span class="c1"># FIXME: for now we just assume all values are </span>
    <span class="c1"># given in one string separated with &quot;,&quot; -&gt; e.g.</span>
    <span class="c1"># channel = CH,HH,BH,EH</span>


<div class="viewcode-block" id="EventConfig">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.EventConfig">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">EventConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `EventConfig` class defines parameters for configuring earthquake event queries with default</span>
<span class="sd">    values. It is designed to store criteria for filtering earthquake events.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        client (Optional[str]): The FDSN client to use for retrieving earthquake data. Defaults to `&quot;EARTHSCOPE&quot;`.</span>
<span class="sd">        date_config (DateConfig): The date range for querying earthquake events.</span>
<span class="sd">        model (str): The seismic velocity model to use. Defaults to `&quot;IASP91&quot;`.</span>
<span class="sd">        min_depth (float): The minimum earthquake depth in kilometers. Defaults to `-5.0`.</span>
<span class="sd">        max_depth (float): The maximum earthquake depth in kilometers. Defaults to `1000.0`.</span>
<span class="sd">        min_magnitude (float): The minimum earthquake magnitude. Defaults to `5.5`.</span>
<span class="sd">        max_magnitude (float): The maximum earthquake magnitude. Defaults to `10.0`.</span>
<span class="sd">        min_radius (float): The minimum distance from the event in degrees. Defaults to `30.0`.</span>
<span class="sd">        max_radius (float): The maximum distance from the event in degrees. Defaults to `90.0`.</span>
<span class="sd">        before_p_sec (int): The number of seconds before the P-wave arrival. Defaults to `10`.</span>
<span class="sd">        after_p_sec (int): The number of seconds after the P-wave arrival. Defaults to `130`.</span>
<span class="sd">        include_all_origins (bool): Whether to include all origins of an event. Defaults to `False`.</span>
<span class="sd">        include_all_magnitudes (bool): Whether to include all magnitude values for an event. Defaults to `False`.</span>
<span class="sd">        include_arrivals (bool): Whether to include phase arrivals in the results. Defaults to `False`.</span>
<span class="sd">        local_catalog (Optional[str]): The local earthquake catalog name, if applicable.</span>
<span class="sd">        eventtype (Optional[str]): The type of earthquake event (e.g., &quot;earthquake&quot;, &quot;explosion&quot;).</span>
<span class="sd">        catalog (Optional[str]): The name of the earthquake catalog used for querying events.</span>
<span class="sd">        contributor (Optional[str]): The name of the contributor providing the earthquake data.</span>
<span class="sd">        updatedafter (Optional[str]): The UTC timestamp indicating the last update time for event selection.</span>
<span class="sd">        limit (Optional[str]): The maximum number of events to retrieve.</span>
<span class="sd">        offset (Optional[str]): The offset for paginated earthquake data retrieval.</span>
<span class="sd">        selected_catalogs (Optional[Any]): A list of user-selected earthquake catalogs.</span>
<span class="sd">        geo_constraint (Optional[List[GeometryConstraint]]): Geospatial constraints on earthquake events.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">client</span>              <span class="p">:</span> <span class="n">Optional</span>   <span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;EARTHSCOPE&quot;</span>
    <span class="n">date_config</span>         <span class="p">:</span> <span class="n">DateConfig</span>                 <span class="o">=</span> <span class="n">DateConfig</span><span class="p">(</span>
        <span class="n">start_time</span><span class="o">=</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>        
        <span class="n">end_time</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">model</span>               <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;IASP91&#39;</span>
    <span class="n">min_depth</span>           <span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="o">-</span><span class="mf">5.0</span>
    <span class="n">max_depth</span>           <span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1000.0</span>
    <span class="n">min_magnitude</span>       <span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">5.5</span>
    <span class="n">max_magnitude</span>       <span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span>
    <span class="n">min_radius</span>          <span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">30.0</span>
    <span class="n">max_radius</span>          <span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">90.0</span>
    <span class="n">before_p_sec</span>        <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="n">after_p_sec</span>         <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">130</span>
    <span class="n">include_all_origins</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">include_all_magnitudes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">include_arrivals</span>    <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">local_catalog</span>       <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">eventtype</span>           <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">catalog</span>             <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">contributor</span>         <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">updatedafter</span>        <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span> <span class="c1">#this is a UTCDateTime object fwiw</span>
    <span class="n">limit</span>               <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">offset</span>              <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">selected_catalogs</span>   <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">geo_constraint</span>      <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">GeometryConstraint</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

<div class="viewcode-block" id="EventConfig.Config">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.EventConfig.Config">[docs]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
        <span class="n">json_encoders</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">Any</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="kc">None</span>  
        <span class="p">}</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;selected_catalogs&quot;</span><span class="p">}</span></div>


<div class="viewcode-block" id="EventConfig.set_default">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.EventConfig.set_default">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Resets all fields to their default values.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__fields_set__</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__fields__</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field_name</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">get_default</span><span class="p">())</span>      </div>
</div>



<div class="viewcode-block" id="PredictionData">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.PredictionData">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">PredictionData</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `PredictionData` class stores predicted arrival times of seismic waves at a given station.</span>

<span class="sd">    This class represents the association between an event and a station, including estimated </span>
<span class="sd">    P-wave and S-wave arrival times.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        event_id (str): The unique identifier for the seismic event.</span>
<span class="sd">        station_id (str): The identifier of the seismic station where arrivals are recorded.</span>
<span class="sd">        p_arrival (datetime): The predicted arrival time of the primary (P) wave.</span>
<span class="sd">        s_arrival (datetime): The predicted arrival time of the secondary (S) wave.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">event_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">station_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">p_arrival</span><span class="p">:</span> <span class="n">datetime</span>
    <span class="n">s_arrival</span><span class="p">:</span> <span class="n">datetime</span></div>


<div class="viewcode-block" id="SeismoLoaderSettings">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoLoaderSettings">[docs]</a>
<span class="k">class</span><span class="w"> </span><span class="nc">SeismoLoaderSettings</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `SeismoLoaderSettings` class defines configuration settings for managing seismic data retrieval, </span>
<span class="sd">    processing, and storage. It provides attributes to control how seismic waveforms, station metadata, </span>
<span class="sd">    and event data are handled.</span>

<span class="sd">    This class also includes methods for configuring download types, reading settings from a configuration </span>
<span class="sd">    file, managing authentication, and persisting settings to disk.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        sds_path (str): The directory path for the Seismic Data Structure (SDS). Defaults to `data/SDS`.</span>
<span class="sd">        db_path (str): The database file path for tracking downloaded data. Defaults to `data/database.sqlite`.</span>
<span class="sd">        download_type (DownloadType): The type of download to perform (e.g., event-based or continuous).</span>
<span class="sd">        selected_workflow (WorkflowType): The selected workflow type (e.g., event-based, station-based).</span>
<span class="sd">        processing (ProcessingConfig): Configuration settings for data processing. Defaults to `None`.</span>
<span class="sd">        client_url_mapping (Optional[UrlMappings]): A mapping of client URLs for data retrieval.</span>
<span class="sd">        extra_clients (Optional[dict]): A dictionary of additional clients for querying seismic data.</span>
<span class="sd">        auths (Optional[List[AuthConfig]]): A list of authentication configurations.</span>
<span class="sd">        waveform (WaveformConfig): Configuration for waveform retrieval. Defaults to `None`.</span>
<span class="sd">        station (StationConfig): Configuration for station metadata retrieval. Defaults to `None`.</span>
<span class="sd">        event (EventConfig): Configuration for event data retrieval. Defaults to `None`.</span>
<span class="sd">        predictions (Dict[str, PredictionData]): A dictionary mapping event-station pairs to arrival time predictions.</span>
<span class="sd">        status_handler (StatusHandler): A handler for tracking status messages and errors.</span>

<span class="sd">    Methods:</span>
<span class="sd">        set_download_type_from_workflow():</span>
<span class="sd">            Sets the `download_type` attribute based on the selected workflow.</span>
<span class="sd">        </span>
<span class="sd">        from_cfg_file(cls, cfg_source: Union[str, IO]) -&gt; &quot;SeismoLoaderSettings&quot;:</span>
<span class="sd">            Loads and initializes a `SeismoLoaderSettings` instance from a configuration file.</span>

<span class="sd">        add_prediction(event_id: str, station_id: str, p_arrival: datetime, s_arrival: datetime):</span>
<span class="sd">            Adds a predicted P-wave and S-wave arrival time for a given event and station.</span>

<span class="sd">        get_prediction(event_id: str, station_id: str) -&gt; Optional[PredictionData]:</span>
<span class="sd">            Retrieves the predicted arrival time for a given event and station.</span>

<span class="sd">        to_pickle(pickle_path: str) -&gt; None:</span>
<span class="sd">            Serializes the `SeismoLoaderSettings` instance to a pickle file.</span>

<span class="sd">        from_pickle_file(cls, pickle_path: str) -&gt; &quot;SeismoLoaderSettings&quot;:</span>
<span class="sd">            Loads a `SeismoLoaderSettings` instance from a pickle file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sds_path</span>          <span class="p">:</span> <span class="nb">str</span>                                   <span class="o">=</span> <span class="s2">&quot;data/SDS&quot;</span>
    <span class="n">db_path</span>           <span class="p">:</span> <span class="nb">str</span>                                   <span class="o">=</span> <span class="s2">&quot;data/database.sqlite&quot;</span>
    <span class="n">download_type</span>     <span class="p">:</span> <span class="n">DownloadType</span>                          <span class="o">=</span> <span class="n">DownloadType</span><span class="o">.</span><span class="n">EVENT</span>
    <span class="n">selected_workflow</span> <span class="p">:</span> <span class="n">WorkflowType</span>                          <span class="o">=</span> <span class="n">WorkflowType</span><span class="o">.</span><span class="n">EVENT_BASED</span>
    <span class="n">processing</span>        <span class="p">:</span> <span class="n">ProcessingConfig</span>                      <span class="o">=</span> <span class="kc">None</span>
    <span class="n">client_url_mapping</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">UrlMappings</span><span class="p">]</span>                 <span class="o">=</span> <span class="n">UrlMappings</span><span class="p">()</span>
    <span class="n">extra_clients</span>     <span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]</span>                        <span class="o">=</span> <span class="p">{}</span>
    <span class="n">auths</span>             <span class="p">:</span> <span class="n">Optional</span>        <span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">AuthConfig</span><span class="p">]]</span>    <span class="o">=</span> <span class="p">[]</span>
    <span class="n">waveform</span>          <span class="p">:</span> <span class="n">WaveformConfig</span>                        <span class="o">=</span> <span class="kc">None</span>
    <span class="n">station</span>           <span class="p">:</span> <span class="n">StationConfig</span>                         <span class="o">=</span> <span class="kc">None</span>
    <span class="n">event</span>             <span class="p">:</span> <span class="n">EventConfig</span>                           <span class="o">=</span> <span class="kc">None</span>
    <span class="n">predictions</span>       <span class="p">:</span> <span class="n">Dict</span>            <span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PredictionData</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">status_handler</span>    <span class="p">:</span> <span class="n">StatusHandler</span>                         <span class="o">=</span> <span class="n">StatusHandler</span><span class="p">()</span>


<div class="viewcode-block" id="SeismoLoaderSettings.create_default">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoLoaderSettings.create_default">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_default</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates an instance of SeismoLoaderSettings with default values.&quot;&quot;&quot;</span>

        <span class="n">station_instance</span> <span class="o">=</span> <span class="n">StationConfig</span><span class="p">()</span>
        <span class="n">station_instance</span><span class="o">.</span><span class="n">set_default</span><span class="p">()</span>

        <span class="n">event_instance</span> <span class="o">=</span> <span class="n">EventConfig</span><span class="p">()</span>
        <span class="n">event_instance</span><span class="o">.</span><span class="n">set_default</span><span class="p">()</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">sds_path</span><span class="o">=</span><span class="s1">&#39;data/SDS&#39;</span><span class="p">,</span>
            <span class="n">db_path</span><span class="o">=</span><span class="s1">&#39;data/database.sqlite&#39;</span><span class="p">,</span>
            <span class="n">download_type</span><span class="o">=</span><span class="n">DownloadType</span><span class="o">.</span><span class="n">EVENT</span><span class="p">,</span>
            <span class="n">selected_workflow</span><span class="o">=</span><span class="n">WorkflowType</span><span class="o">.</span><span class="n">EVENT_BASED</span><span class="p">,</span>
            <span class="n">processing</span><span class="o">=</span><span class="n">ProcessingConfig</span><span class="p">(</span>
                <span class="n">num_processes</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                <span class="n">gap_tolerance</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">client_url_mapping</span><span class="o">=</span><span class="n">UrlMappings</span><span class="p">(),</span>
            <span class="n">extra_clients</span><span class="o">=</span><span class="p">{},</span>
            <span class="n">auths</span><span class="o">=</span><span class="p">[],</span>
            <span class="n">waveform</span><span class="o">=</span><span class="n">WaveformConfig</span><span class="p">(),</span> 
            <span class="n">station</span><span class="o">=</span><span class="n">station_instance</span><span class="p">,</span>  
            <span class="n">event</span><span class="o">=</span><span class="n">event_instance</span><span class="p">,</span>      
            <span class="n">predictions</span><span class="o">=</span><span class="p">{},</span>
            <span class="n">status_handler</span><span class="o">=</span><span class="n">StatusHandler</span><span class="p">(),</span>
        <span class="p">)</span></div>

    
<div class="viewcode-block" id="SeismoLoaderSettings.set_download_type_from_workflow">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoLoaderSettings.set_download_type_from_workflow">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">set_download_type_from_workflow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets the download type based on the selected workflow.</span>

<span class="sd">        If `selected_workflow` is `EVENT_BASED` or `STATION_BASED`, sets `download_type` to `EVENT`.</span>
<span class="sd">        If `selected_workflow` is `CONTINUOUS`, sets `download_type` to `CONTINUOUS`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selected_workflow</span> <span class="o">==</span> <span class="n">WorkflowType</span><span class="o">.</span><span class="n">EVENT_BASED</span> <span class="ow">or</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selected_workflow</span> <span class="o">==</span> <span class="n">WorkflowType</span><span class="o">.</span><span class="n">STATION_BASED</span>
        <span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">download_type</span> <span class="o">=</span> <span class="n">DownloadType</span><span class="o">.</span><span class="n">EVENT</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_workflow</span> <span class="o">==</span> <span class="n">WorkflowType</span><span class="o">.</span><span class="n">CONTINUOUS</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">download_type</span> <span class="o">=</span> <span class="n">DownloadType</span><span class="o">.</span><span class="n">CONTINUOUS</span></div>


    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_check_val</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">val</span><span class="p">,</span> <span class="n">default_val</span><span class="p">,</span> <span class="n">val_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="n">return_empty_str</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">val</span>
        
        <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">val</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;none&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">default_val</span>
        
        <span class="c1"># For cases where user purposedly is passing empty string</span>
        <span class="k">if</span> <span class="n">val</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">return_empty_str</span><span class="p">:</span>
                <span class="k">return</span> <span class="s1">&#39;&#39;</span>
            <span class="k">return</span> <span class="n">default_val</span>

        <span class="k">else</span><span class="p">:</span>            
            <span class="k">if</span> <span class="n">val_type</span> <span class="o">==</span> <span class="s2">&quot;int&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">val_type</span> <span class="o">==</span> <span class="s2">&quot;float&quot;</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">val</span>
        

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_is_none</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span> 
            <span class="k">if</span> <span class="n">val</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span> <span class="ow">or</span> <span class="n">val</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;none&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>
            
<div class="viewcode-block" id="SeismoLoaderSettings.from_cfg_file">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoLoaderSettings.from_cfg_file">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_cfg_file</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">cfg_source</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">IO</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;SeismoLoaderSettings&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads a `SeismoLoaderSettings` instance from a configuration file.</span>

<span class="sd">        Args:</span>
<span class="sd">            cfg_source (Union[str, IO]): The path to the configuration file or a file-like object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            SeismoLoaderSettings: A populated instance of the class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">status_handler</span><span class="o">=</span> <span class="n">StatusHandler</span><span class="p">()</span>       
        <span class="n">config</span> <span class="o">=</span> <span class="n">configparser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">()</span>
        <span class="n">config</span><span class="o">.</span><span class="n">optionxform</span> <span class="o">=</span> <span class="nb">str</span>

        <span class="c1"># Load configuration file</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_load_config_file</span><span class="p">(</span><span class="n">cfg_source</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>


        <span class="c1"># Parse sections</span>
        <span class="n">sds_path</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_sds_section</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">status_handler</span><span class="p">)</span>
        <span class="n">db_path</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_database_section</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">sds_path</span><span class="p">,</span> <span class="n">status_handler</span><span class="p">)</span>
        <span class="n">processing_config</span><span class="p">,</span> <span class="n">download_type</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_processing_section</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">status_handler</span><span class="p">)</span>
        <span class="n">lst_auths</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_auth_section</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">status_handler</span><span class="p">)</span>
        <span class="n">waveform</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_waveform_section</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">status_handler</span><span class="p">)</span>
        <span class="n">station_config</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_station_section</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">status_handler</span><span class="p">)</span>
        <span class="n">event_config</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_event_section</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">status_handler</span><span class="p">)</span>

        <span class="c1"># status_handler.display()</span>


        <span class="c1"># Return the populated SeismoLoaderSettings</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span>
            <span class="n">sds_path</span><span class="o">=</span><span class="n">sds_path</span><span class="p">,</span>
            <span class="n">db_path</span><span class="o">=</span><span class="n">db_path</span><span class="p">,</span>
            <span class="n">download_type</span><span class="o">=</span><span class="n">download_type</span><span class="p">,</span>
            <span class="n">processing</span><span class="o">=</span><span class="n">processing_config</span><span class="p">,</span>
            <span class="n">auths</span><span class="o">=</span><span class="n">lst_auths</span><span class="p">,</span>
            <span class="n">waveform</span><span class="o">=</span><span class="n">waveform</span><span class="p">,</span>
            <span class="n">station</span><span class="o">=</span><span class="n">station_config</span><span class="p">,</span>
            <span class="n">event</span><span class="o">=</span><span class="n">event_config</span><span class="p">,</span>
            <span class="n">status_handler</span> <span class="o">=</span><span class="n">status_handler</span>
        <span class="p">)</span></div>

    
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_load_config_file</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">cfg_source</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">cfg_source</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">cfg_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">cfg_source</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">cfg_path</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;File not found in the following path: </span><span class="si">{</span><span class="n">cfg_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">cfg_path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">cfg_source</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to read configuration file: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_sds_section</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">status_handler</span> <span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sds_path</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;SDS&#39;</span><span class="p">,</span> <span class="s1">&#39;sds_path&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">sds_path</span><span class="p">:</span>
                <span class="n">sds_path</span> <span class="o">=</span> <span class="s2">&quot;data/SDS&quot;</span>
                <span class="n">status_handler</span><span class="o">.</span><span class="n">add_warning</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span> <span class="p">,</span> <span class="s2">&quot;&#39;sds_path&#39; is missing in the [SDS] section. Using default value: &#39;data/SDS&#39;.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">sds_path</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">status_handler</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span> <span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Error parsing [SDS] section: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>            

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_database_section</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">sds_path</span><span class="p">,</span> <span class="n">status_handler</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">db_path</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;DATABASE&#39;</span><span class="p">,</span> <span class="s1">&#39;db_path&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">db_path</span><span class="p">:</span>
                <span class="n">db_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">sds_path</span><span class="si">}</span><span class="s1">/database.sqlite&#39;</span>
                <span class="n">status_handler</span><span class="o">.</span><span class="n">add_warning</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;: &#39;db_path&#39; is missing or empty in the [DATABASE] section. Using default value: &#39;</span><span class="si">{</span><span class="n">db_path</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">db_path</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">status_handler</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Error parsing [DATABASE] section: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
                    
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_processing_section</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">status_handler</span><span class="p">):</span>
        <span class="c1"># Parse num_processes</span>
        <span class="n">num_processes</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;PROCESSING&#39;</span><span class="p">,</span> <span class="s1">&#39;num_processes&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">num_processes</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">num_processes</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;int&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">num_processes</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># Default value</span>
            <span class="n">status_handler</span><span class="o">.</span><span class="n">add_warning</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;num_processes&#39; is missing or invalid in the [PROCESSING] section. Using default value: &#39;2&#39;.&quot;</span><span class="p">)</span>

        <span class="c1"># Parse gap_tolerance</span>
        <span class="n">gap_tolerance</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;PROCESSING&#39;</span><span class="p">,</span> <span class="s1">&#39;gap_tolerance&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">gap_tolerance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">gap_tolerance</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="s2">&quot;int&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">gap_tolerance</span> <span class="o">=</span> <span class="mi">60</span>  <span class="c1"># Default value</span>
            <span class="n">status_handler</span><span class="o">.</span><span class="n">add_warning</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;gap_tolerance&#39; is missing or invalid in the [PROCESSING] section. Using default value: &#39;60&#39;.&quot;</span><span class="p">)</span>

        <span class="c1"># Parse and validate download_type</span>
        <span class="n">download_type_str</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;PROCESSING&#39;</span><span class="p">,</span> <span class="s1">&#39;download_type&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">download_type_str</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">DownloadType</span><span class="o">.</span><span class="n">_value2member_map_</span><span class="p">:</span>
            <span class="n">status_handler</span><span class="o">.</span><span class="n">add_warning</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Invalid download_type &#39;</span><span class="si">{</span><span class="n">download_type_str</span><span class="si">}</span><span class="s2">&#39; found in config. Defaulting to &#39;event&#39;.&quot;</span><span class="p">)</span>
            <span class="n">download_type_str</span> <span class="o">=</span> <span class="n">DownloadType</span><span class="o">.</span><span class="n">EVENT</span><span class="o">.</span><span class="n">value</span>  <span class="c1"># Default to &#39;event&#39;</span>
        <span class="n">download_type</span> <span class="o">=</span> <span class="n">DownloadType</span><span class="p">(</span><span class="n">download_type_str</span><span class="p">)</span>

        <span class="c1"># Return the ProcessingConfig object</span>
        <span class="k">return</span> <span class="n">ProcessingConfig</span><span class="p">(</span>
            <span class="n">num_processes</span><span class="o">=</span><span class="n">num_processes</span><span class="p">,</span>
            <span class="n">gap_tolerance</span><span class="o">=</span><span class="n">gap_tolerance</span><span class="p">,</span>
        <span class="p">),</span> <span class="n">download_type</span>


    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_auth_section</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">status_handler</span> <span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">credentials</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;AUTH&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="n">AuthConfig</span><span class="p">(</span><span class="n">nslc_code</span><span class="o">=</span><span class="n">nslc</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="n">cred</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">password</span><span class="o">=</span><span class="n">cred</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">nslc</span><span class="p">,</span> <span class="n">cred</span> <span class="ow">in</span> <span class="n">credentials</span>
            <span class="p">]</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">status_handler</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Error parsing [AUTH] section: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">[]</span>
        

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_waveform_section</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">status_handler</span> <span class="p">):</span>
        <span class="n">waveform_section</span> <span class="o">=</span> <span class="s1">&#39;WAVEFORM&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="n">waveform_section</span><span class="p">):</span>
            <span class="n">status_handler</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The [</span><span class="si">{</span><span class="n">waveform_section</span><span class="si">}</span><span class="s2">] section is missing in the configuration file.&quot;</span><span class="p">)</span>

        <span class="n">client</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">waveform_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s1">&#39;client&#39;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;EARTHSCOPE&quot;</span><span class="p">,</span>
            <span class="n">status_handler</span> <span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;client&#39; is missing in the [</span><span class="si">{</span><span class="n">waveform_section</span><span class="si">}</span><span class="s2">] section. Specify the client for station data retrieval.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;client&#39; is empty in the [</span><span class="si">{</span><span class="n">waveform_section</span><span class="si">}</span><span class="s2">] section. Defaulting to &#39;EARTHSCOPE&#39;.&quot;</span><span class="p">,</span>
            <span class="n">validation_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>  <span class="c1"># Ensure the value is not empty after stripping</span>
        <span class="p">)</span>
        <span class="n">days_per_request</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">waveform_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;days_per_request&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">validation_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>  <span class="c1"># Ensure it&#39;s a positive integer</span>
            <span class="n">status_handler</span><span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;days_per_request&#39; is missing or invalid in the [</span><span class="si">{</span><span class="n">waveform_section</span><span class="si">}</span><span class="s2">] section.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;days_per_request&#39; is empty in the [</span><span class="si">{</span><span class="n">waveform_section</span><span class="si">}</span><span class="s2">] section. Using default value: 1.&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">channel_pref</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">waveform_section</span><span class="p">,</span> <span class="s1">&#39;channel_pref&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">location_pref</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">waveform_section</span><span class="p">,</span> <span class="s1">&#39;location_pref&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="c1"># channel_pref = cls.parse_optional (config.get(waveform_section, &#39;channel_pref&#39;, fallback=None))</span>
        <span class="c1"># location_pref =cls.parse_optional(config.get(waveform_section, &#39;location_pref&#39;, fallback=None))</span>

        <span class="k">return</span> <span class="n">WaveformConfig</span><span class="p">(</span>
            <span class="n">client</span><span class="o">=</span><span class="n">client</span><span class="p">,</span>
            <span class="n">channel_pref</span><span class="o">=</span><span class="n">channel_pref</span><span class="p">,</span>
            <span class="n">location_pref</span><span class="o">=</span><span class="n">location_pref</span><span class="p">,</span>
            <span class="n">days_per_request</span><span class="o">=</span><span class="n">days_per_request</span><span class="p">,</span>
        <span class="p">)</span>
            
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_station_section</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">status_handler</span><span class="p">):</span>
        <span class="n">station_section</span> <span class="o">=</span> <span class="s1">&#39;STATION&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="n">station_section</span><span class="p">):</span>
            <span class="n">status_handler</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section is missing in the configuration file. Please provide station details.&quot;</span><span class="p">)</span>
        
        <span class="n">station_client</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">station_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s1">&#39;client&#39;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;EARTHSCOPE&quot;</span><span class="p">,</span>
            <span class="n">status_handler</span> <span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;client&#39; is missing in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Specify the client for station data retrieval.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;client&#39; is empty in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Defaulting to &#39;EARTHSCOPE&#39;.&quot;</span><span class="p">,</span>
            <span class="n">validation_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>  <span class="c1"># Ensure the value is not empty after stripping</span>
        <span class="p">)</span>

        <span class="n">network</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">station_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s1">&#39;network&#39;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;_GSN&quot;</span><span class="p">,</span>
            <span class="n">status_handler</span> <span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;network&#39; is missing in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Please specify a network.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;network&#39; is empty in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Defaulting to &#39;_GSN&#39;.&quot;</span>
        <span class="p">)</span>

        <span class="n">station</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">station_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s1">&#39;station&#39;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span>
            <span class="n">status_handler</span> <span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;station&#39; is missing in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Please specify a station.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;station&#39; is empty in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Defaulting to &#39;*&#39;.&quot;</span>
        <span class="p">)</span>

        <span class="n">location</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">station_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s1">&#39;location&#39;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span>
            <span class="n">status_handler</span> <span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;location&#39; is missing in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Please specify a location.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;location&#39; is empty in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Defaulting to &#39;*&#39;.&quot;</span>
        <span class="p">)</span>

        <span class="n">channel</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">station_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s1">&#39;channel&#39;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;?H?,?N?&quot;</span><span class="p">,</span>
            <span class="n">status_handler</span> <span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;channel&#39; is missing in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Please specify a channel.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;channel&#39; is empty in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Defaulting to &#39;?H?,?N?&#39;.&quot;</span><span class="p">,</span>
            <span class="c1"># validation_fn=lambda x: bool(re.match(r&#39;^(\?[\w]\?,?)+$&#39;, x))</span>
        <span class="p">)</span>
        
        <span class="n">start_time</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">station_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;starttime&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="n">status_handler</span><span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;starttime&#39; is missing in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Specify a valid start time.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;starttime&#39; is empty in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Defaulting to 1 month before the current time.&quot;</span><span class="p">,</span>
            <span class="n">validation_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">parse_time</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">parse_time</span><span class="p">(</span><span class="n">start_time</span><span class="p">)</span>

        <span class="n">end_time</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">station_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;endtime&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="n">status_handler</span><span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;endtime&#39; is missing in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Specify a valid end time.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;endtime&#39; is empty in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Defaulting to the current time.&quot;</span><span class="p">,</span>
            <span class="n">validation_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">parse_time</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="n">end_time</span> <span class="o">=</span> <span class="n">parse_time</span><span class="p">(</span><span class="n">end_time</span><span class="p">)</span>

        <span class="n">geo_constraint_station</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_geo_constraint</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="n">status_handler</span><span class="p">)</span>

        <span class="c1"># Parse force_stations</span>
        <span class="n">force_stations_cmb_n_s</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">station_section</span><span class="p">,</span> <span class="s1">&#39;force_stations&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
        <span class="n">force_stations</span> <span class="o">=</span> <span class="p">[</span><span class="n">SeismoQuery</span><span class="p">(</span><span class="n">cmb_str_n_s</span><span class="o">=</span><span class="n">cmb_n_s</span><span class="p">)</span> <span class="k">for</span> <span class="n">cmb_n_s</span> <span class="ow">in</span> <span class="n">force_stations_cmb_n_s</span> <span class="k">if</span> <span class="n">cmb_n_s</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>

        <span class="c1"># Parse exclude_stations</span>
        <span class="n">exclude_stations_cmb_n_s</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">station_section</span><span class="p">,</span> <span class="s1">&#39;exclude_stations&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
        <span class="n">exclude_stations</span> <span class="o">=</span> <span class="p">[</span><span class="n">SeismoQuery</span><span class="p">(</span><span class="n">cmb_str_n_s</span><span class="o">=</span><span class="n">cmb_n_s</span><span class="p">)</span> <span class="k">for</span> <span class="n">cmb_n_s</span> <span class="ow">in</span> <span class="n">exclude_stations_cmb_n_s</span> <span class="k">if</span> <span class="n">cmb_n_s</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>

        <span class="c1"># Parse local_inventory</span>
        <span class="n">local_inventory</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_optional</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">station_section</span><span class="p">,</span> <span class="s1">&#39;local_inventory&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
        <span class="n">highest_samplerate_only</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">station_section</span><span class="p">,</span> <span class="s2">&quot;highest_samplerate_only&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;bool&quot;</span><span class="p">)</span>

 

        <span class="c1"># Parse include_restricted</span>
        <span class="n">include_restricted</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span>
            <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">station_section</span><span class="p">,</span> <span class="s1">&#39;include_restricted&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="s1">&#39;False&#39;</span><span class="p">),</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;bool&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Parse level</span>
        <span class="n">level</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">station_section</span><span class="p">,</span> <span class="s1">&#39;level&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">level</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Key is missing</span>
            <span class="n">status_handler</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;&#39;level&#39; is missing in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Please specify a level (e.g., &#39;channel&#39;).&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">level</span> <span class="o">=</span> <span class="n">level</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">level</span><span class="p">:</span>  <span class="c1"># Value is empty</span>
                <span class="n">level</span><span class="o">=</span> <span class="n">Levels</span><span class="o">.</span><span class="n">CHANNEL</span>
                <span class="n">status_handler</span><span class="o">.</span><span class="n">add_warning</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;&#39;level&#39; is empty in the [</span><span class="si">{</span><span class="n">station_section</span><span class="si">}</span><span class="s2">] section. Defaulting to &#39;channel&#39;.&quot;</span><span class="p">)</span>


        <span class="c1"># Parse date configurations</span>
        <span class="n">date_config</span> <span class="o">=</span> <span class="n">DateConfig</span><span class="p">(</span>
            <span class="n">start_time</span><span class="o">=</span><span class="n">start_time</span><span class="p">,</span>
            <span class="n">end_time</span><span class="o">=</span><span class="n">end_time</span><span class="p">,</span>
            <span class="n">start_before</span><span class="o">=</span><span class="bp">cls</span><span class="o">.</span><span class="n">parse_optional</span><span class="p">(</span><span class="n">parse_time</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">station_section</span><span class="p">,</span> <span class="s1">&#39;startbefore&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">))),</span>
            <span class="n">start_after</span><span class="o">=</span><span class="bp">cls</span><span class="o">.</span><span class="n">parse_optional</span><span class="p">(</span><span class="n">parse_time</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">station_section</span><span class="p">,</span> <span class="s1">&#39;startafter&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">))),</span>
            <span class="n">end_before</span><span class="o">=</span><span class="bp">cls</span><span class="o">.</span><span class="n">parse_optional</span><span class="p">(</span><span class="n">parse_time</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">station_section</span><span class="p">,</span> <span class="s1">&#39;endbefore&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">))),</span>
            <span class="n">end_after</span><span class="o">=</span><span class="bp">cls</span><span class="o">.</span><span class="n">parse_optional</span><span class="p">(</span><span class="n">parse_time</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">station_section</span><span class="p">,</span> <span class="s1">&#39;endafter&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">))),</span>
        <span class="p">)</span>

        <span class="c1"># Build the StationConfig object</span>
        <span class="k">return</span> <span class="n">StationConfig</span><span class="p">(</span>
            <span class="n">client</span><span class="o">=</span><span class="n">station_client</span><span class="p">,</span>
            <span class="n">local_inventory</span><span class="o">=</span><span class="n">local_inventory</span><span class="p">,</span>
            <span class="n">force_stations</span><span class="o">=</span><span class="n">force_stations</span><span class="p">,</span>
            <span class="n">exclude_stations</span><span class="o">=</span><span class="n">exclude_stations</span><span class="p">,</span>
            <span class="n">date_config</span><span class="o">=</span><span class="n">date_config</span><span class="p">,</span>
            <span class="n">network</span><span class="o">=</span><span class="n">network</span><span class="p">,</span>
            <span class="n">station</span><span class="o">=</span><span class="n">station</span><span class="p">,</span>
            <span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">,</span>
            <span class="n">channel</span><span class="o">=</span><span class="n">channel</span><span class="p">,</span>
            <span class="n">highest_samplerate_only</span><span class="o">=</span><span class="n">highest_samplerate_only</span><span class="p">,</span> <span class="c1">#double check this belongs here</span>
            <span class="n">geo_constraint</span><span class="o">=</span><span class="p">[</span><span class="n">geo_constraint_station</span><span class="p">]</span> <span class="k">if</span> <span class="n">geo_constraint_station</span> <span class="k">else</span> <span class="p">[],</span>
            <span class="n">include_restricted</span><span class="o">=</span><span class="n">include_restricted</span><span class="p">,</span>
            <span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_event_section</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">status_handler</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse and validate the EVENT section of the configuration file.</span>

<span class="sd">        Args:</span>
<span class="sd">            config: ConfigParser object.</span>
<span class="sd">            warnings: List to append warnings.</span>
<span class="sd">            errors: List to append errors.</span>

<span class="sd">        Returns:</span>
<span class="sd">            EventConfig object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">event_section</span> <span class="o">=</span> <span class="s2">&quot;EVENT&quot;</span>

        <span class="c1"># Ensure the EVENT section exists</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">has_section</span><span class="p">(</span><span class="n">event_section</span><span class="p">):</span>
            <span class="n">status_handler</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;The [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section is missing in the configuration file.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="c1"># Parse required parameters</span>
        <span class="n">event_client</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">event_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;client&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;EARTHSCOPE&quot;</span><span class="p">,</span>
            <span class="n">status_handler</span><span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;client&#39; is missing in the [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section. Specify a client.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;client&#39; is empty in the [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section. Defaulting to &#39;EARTHSCOPE&#39;.&quot;</span><span class="p">,</span>
            <span class="n">validation_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">bool</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="p">)</span>

        <span class="n">model</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">event_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;model&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;iasp91&quot;</span><span class="p">,</span>
            <span class="n">status_handler</span><span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;model&#39; is missing in the [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section. Specify a model.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;model&#39; is empty in the [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section. Defaulting to &#39;iasp91&#39;.&quot;</span>
        <span class="p">)</span>

        <span class="n">start_time</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">event_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;starttime&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="n">status_handler</span><span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;starttime&#39; is missing in the [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section. Specify a valid start time.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;starttime&#39; is empty in the [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section. Defaulting to 1 month before the current time.&quot;</span><span class="p">,</span>
            <span class="n">validation_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">parse_time</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="n">start_time</span> <span class="o">=</span> <span class="n">parse_time</span><span class="p">(</span><span class="n">start_time</span><span class="p">)</span>

        <span class="n">end_time</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">event_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;endtime&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="n">status_handler</span><span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;endtime&#39; is missing in the [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section. Specify a valid end time.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;endtime&#39; is empty in the [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section. Defaulting to the current time.&quot;</span><span class="p">,</span>
            <span class="n">validation_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">parse_time</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="n">end_time</span> <span class="o">=</span> <span class="n">parse_time</span><span class="p">(</span><span class="n">end_time</span><span class="p">)</span>

        <span class="n">before_p_sec</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">event_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;before_p_sec&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
            <span class="n">status_handler</span><span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;before_p_sec&#39; is missing in the [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section. Specify a valid integer.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;before_p_sec&#39; is empty in the [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section. Defaulting to &#39;20&#39;.&quot;</span><span class="p">,</span>
            <span class="n">validation_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">before_p_sec</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">before_p_sec</span><span class="p">)</span>

        <span class="n">after_p_sec</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_param</span><span class="p">(</span>
            <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span>
            <span class="n">section</span><span class="o">=</span><span class="n">event_section</span><span class="p">,</span>
            <span class="n">key</span><span class="o">=</span><span class="s2">&quot;after_p_sec&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="mi">130</span><span class="p">,</span>
            <span class="n">status_handler</span><span class="o">=</span><span class="n">status_handler</span><span class="p">,</span>
            <span class="n">error_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;after_p_sec&#39; is missing in the [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section. Specify a valid integer.&quot;</span><span class="p">,</span>
            <span class="n">warning_message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;&#39;after_p_sec&#39; is empty in the [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section. Defaulting to &#39;130&#39;.&quot;</span><span class="p">,</span>
            <span class="n">validation_fn</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="n">after_p_sec</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">after_p_sec</span><span class="p">)</span>

        <span class="c1"># Parse optional numerical parameters</span>
        <span class="n">min_depth</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;min_depth&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=-</span><span class="mi">3</span><span class="p">),</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">)</span>
        <span class="n">max_depth</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;max_depth&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="mi">600</span><span class="p">),</span> <span class="mi">600</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">)</span>
        <span class="n">min_magnitude</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;minmagnitude&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="mf">5.5</span><span class="p">),</span> <span class="mf">5.5</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">)</span>
        <span class="n">max_magnitude</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;maxmagnitude&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="mf">7.7</span><span class="p">),</span> <span class="mf">7.7</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">)</span>
        <span class="n">min_radius</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;minradius&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="mf">30.0</span><span class="p">),</span> <span class="mf">30.0</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">)</span>
        <span class="n">max_radius</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;maxradius&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="mf">90.0</span><span class="p">),</span> <span class="mf">90.0</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">min_radius</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">max_radius</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">status_handler</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span> <span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;&#39;min_radius&#39; and &#39;max_radius&#39; must be positive values in the [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">min_radius</span> <span class="o">&gt;=</span> <span class="n">max_radius</span><span class="p">:</span>
            <span class="n">status_handler</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span> <span class="p">,</span><span class="sa">f</span><span class="s2">&quot;&#39;min_radius&#39; must be less than &#39;max_radius&#39; in the [</span><span class="si">{</span><span class="n">event_section</span><span class="si">}</span><span class="s2">] section.&quot;</span><span class="p">)</span>

        <span class="c1"># Parse boolean flags</span>
        <span class="n">include_all_origins</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;includeallorigins&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;bool&quot;</span><span class="p">)</span>
        <span class="n">include_all_magnitudes</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;includeallmagnitudes&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;bool&quot;</span><span class="p">)</span>
        <span class="n">include_arrivals</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;includearrivals&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="kc">False</span><span class="p">,</span> <span class="s2">&quot;bool&quot;</span><span class="p">)</span>
        

        <span class="c1"># Parse optional strings</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_optional</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_optional</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;offset&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
        <span class="n">local_catalog</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_optional</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;local_catalog&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
        <span class="n">contributor</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_optional</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;contributor&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
        <span class="n">updatedafter</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_optional</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;updatedafter&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
        <span class="n">catalog</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_optional</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;catalog&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>
        <span class="n">eventtype</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_optional</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">event_section</span><span class="p">,</span> <span class="s2">&quot;eventtype&quot;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">))</span>

        <span class="c1"># Parse geo_constraint</span>
        <span class="n">geo_constraint_event</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_parse_geo_constraint</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">event_section</span><span class="p">,</span> <span class="n">status_handler</span><span class="p">,)</span>

        <span class="c1"># Return EventConfig object</span>
        <span class="k">return</span> <span class="n">EventConfig</span><span class="p">(</span>
            <span class="n">client</span><span class="o">=</span><span class="n">event_client</span><span class="p">,</span>
            <span class="n">model</span><span class="o">=</span><span class="n">model</span><span class="p">,</span>
            <span class="n">date_config</span><span class="o">=</span><span class="n">DateConfig</span><span class="p">(</span><span class="n">start_time</span><span class="o">=</span><span class="n">start_time</span><span class="p">,</span> <span class="n">end_time</span><span class="o">=</span><span class="n">end_time</span><span class="p">),</span>
            <span class="n">min_depth</span><span class="o">=</span><span class="n">min_depth</span><span class="p">,</span>
            <span class="n">max_depth</span><span class="o">=</span><span class="n">max_depth</span><span class="p">,</span>
            <span class="n">min_magnitude</span><span class="o">=</span><span class="n">min_magnitude</span><span class="p">,</span>
            <span class="n">max_magnitude</span><span class="o">=</span><span class="n">max_magnitude</span><span class="p">,</span>
            <span class="n">min_radius</span><span class="o">=</span><span class="n">min_radius</span><span class="p">,</span>
            <span class="n">max_radius</span><span class="o">=</span><span class="n">max_radius</span><span class="p">,</span>
            <span class="n">before_p_sec</span><span class="o">=</span><span class="n">before_p_sec</span><span class="p">,</span>
            <span class="n">after_p_sec</span><span class="o">=</span><span class="n">after_p_sec</span><span class="p">,</span>
            <span class="n">geo_constraint</span><span class="o">=</span><span class="p">[</span><span class="n">geo_constraint_event</span><span class="p">]</span> <span class="k">if</span> <span class="n">geo_constraint_event</span> <span class="k">else</span> <span class="p">[],</span>
            <span class="n">include_all_origins</span><span class="o">=</span><span class="n">include_all_origins</span><span class="p">,</span>
            <span class="n">include_all_magnitudes</span><span class="o">=</span><span class="n">include_all_magnitudes</span><span class="p">,</span>
            <span class="n">include_arrivals</span><span class="o">=</span><span class="n">include_arrivals</span><span class="p">,</span>
            <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">,</span>
            <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
            <span class="n">local_catalog</span><span class="o">=</span><span class="n">local_catalog</span><span class="p">,</span>
            <span class="n">contributor</span><span class="o">=</span><span class="n">contributor</span><span class="p">,</span>
            <span class="n">updatedafter</span><span class="o">=</span><span class="n">updatedafter</span><span class="p">,</span>
            <span class="n">catalog</span> <span class="o">=</span><span class="n">catalog</span><span class="p">,</span>
            <span class="n">eventtype</span><span class="o">=</span><span class="n">eventtype</span><span class="p">,</span>
        <span class="p">)</span>

<div class="viewcode-block" id="SeismoLoaderSettings.parse_optional">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoLoaderSettings.parse_optional">[docs]</a>
    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">parse_optional</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">else</span> <span class="kc">None</span></div>


    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_param</span><span class="p">(</span>
        <span class="n">config</span><span class="p">,</span>
        <span class="n">section</span><span class="p">,</span>
        <span class="n">key</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">validation_fn</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">status_handler</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">error_message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">warning_message</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse and validate a parameter from the configuration.</span>

<span class="sd">        Args:</span>
<span class="sd">            config: ConfigParser object.</span>
<span class="sd">            section: Section name (e.g., &#39;STATION&#39; or &#39;EVENT&#39;).</span>
<span class="sd">            key: Parameter key to parse.</span>
<span class="sd">            default: Default value to use if the parameter is missing or invalid.</span>
<span class="sd">            validation_fn: Optional function to validate the parameter&#39;s value.</span>
<span class="sd">            status_handler: StatusHandler object to handle warnings and errors.</span>
<span class="sd">            error_message: Custom error message for missing parameters.</span>
<span class="sd">            warning_message: Custom warning message for empty parameters.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The parsed and validated parameter value.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Key is missing</span>
                <span class="k">if</span> <span class="n">error_message</span> <span class="ow">and</span> <span class="n">status_handler</span><span class="p">:</span>
                    <span class="n">status_handler</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="n">error_message</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">default</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>  <span class="c1"># Value is empty</span>
                <span class="k">if</span> <span class="n">warning_message</span> <span class="ow">and</span> <span class="n">status_handler</span><span class="p">:</span>
                    <span class="n">status_handler</span><span class="o">.</span><span class="n">add_warning</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="n">warning_message</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">default</span>
            <span class="k">if</span> <span class="n">validation_fn</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">validation_fn</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">error_message</span> <span class="ow">and</span> <span class="n">status_handler</span><span class="p">:</span>
                    <span class="n">status_handler</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="n">error_message</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">default</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">status_handler</span><span class="p">:</span>
                <span class="n">status_handler</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Error parsing &#39;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&#39; in the [</span><span class="si">{</span><span class="n">section</span><span class="si">}</span><span class="s2">] section: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">default</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_parse_geo_constraint</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">section</span><span class="p">,</span> <span class="n">status_handler</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse and validate the geo_constraint for a given section.</span>

<span class="sd">        Args:</span>
<span class="sd">            config: ConfigParser object.</span>
<span class="sd">            section: Section name (e.g., &#39;STATION&#39; or &#39;EVENT&#39;).</span>
<span class="sd">            warnings: List to append warnings.</span>
<span class="sd">            errors: List to append errors.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A GeometryConstraint object if valid geo_constraint is found; otherwise, an empty list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">geo_constraint_type</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="s1">&#39;geo_constraint&#39;</span><span class="p">,</span> <span class="n">fallback</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">geo_constraint</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">geo_constraint_type</span> <span class="o">==</span> <span class="n">GeoConstraintType</span><span class="o">.</span><span class="n">BOUNDING</span><span class="p">:</span>
            <span class="c1"># Parse bounding box coordinates</span>
            <span class="n">min_lat</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="s1">&#39;minlatitude&#39;</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">)</span>
            <span class="n">max_lat</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="s1">&#39;maxlatitude&#39;</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">)</span>
            <span class="n">min_lng</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="s1">&#39;minlongitude&#39;</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">)</span>
            <span class="n">max_lng</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="s1">&#39;maxlongitude&#39;</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">)</span>

            <span class="c1"># Validate longitude range and adjust if necessary</span>
            <span class="k">if</span> <span class="n">max_lng</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">max_lng</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                <span class="n">max_lng</span> <span class="o">-=</span> <span class="mi">360</span>
                <span class="n">status_handler</span><span class="o">.</span><span class="n">add_warning</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span> <span class="p">,</span><span class="sa">f</span><span class="s2">&quot;&#39;maxlongitude&#39; exceeded 180 in the [</span><span class="si">{</span><span class="n">section</span><span class="si">}</span><span class="s2">] section. Adjusted to </span><span class="si">{</span><span class="n">max_lng</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">min_lng</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">min_lng</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">:</span>
                <span class="n">min_lng</span> <span class="o">+=</span> <span class="mi">360</span>
                <span class="n">status_handler</span><span class="o">.</span><span class="n">add_warning</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span> <span class="p">,</span><span class="sa">f</span><span class="s2">&quot;&#39;minlongitude&#39; was below -180 in the [</span><span class="si">{</span><span class="n">section</span><span class="si">}</span><span class="s2">] section. Adjusted to </span><span class="si">{</span><span class="n">min_lng</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

            <span class="c1"># Create bounding box constraint</span>
            <span class="n">geo_constraint</span> <span class="o">=</span> <span class="n">GeometryConstraint</span><span class="p">(</span>
                <span class="n">coords</span><span class="o">=</span><span class="n">RectangleArea</span><span class="p">(</span>
                    <span class="n">min_lat</span><span class="o">=</span><span class="n">min_lat</span><span class="p">,</span>
                    <span class="n">max_lat</span><span class="o">=</span><span class="n">max_lat</span><span class="p">,</span>
                    <span class="n">min_lng</span><span class="o">=</span><span class="n">min_lng</span><span class="p">,</span>
                    <span class="n">max_lng</span><span class="o">=</span><span class="n">max_lng</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="n">geo_constraint_type</span> <span class="o">==</span> <span class="n">GeoConstraintType</span><span class="o">.</span><span class="n">CIRCLE</span><span class="p">:</span>
            <span class="c1"># Parse circle area coordinates</span>
            <span class="n">lat</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="s1">&#39;latitude&#39;</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">)</span>
            <span class="n">lng</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">)</span>
            <span class="n">min_radius</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="s1">&#39;minsearchradius&#39;</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">)</span>
            <span class="n">max_radius</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_check_val</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="s1">&#39;maxsearchradius&#39;</span><span class="p">),</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;float&quot;</span><span class="p">)</span>

            <span class="c1"># Validate longitude range and adjust if necessary</span>
            <span class="k">if</span> <span class="n">lng</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">lng</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">:</span>
                <span class="n">lng</span> <span class="o">-=</span> <span class="mi">360</span>
                <span class="n">status_handler</span><span class="o">.</span><span class="n">add_warning</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span> <span class="p">,</span><span class="sa">f</span><span class="s2">&quot;&#39;longitude&#39; exceeded 180 in the [</span><span class="si">{</span><span class="n">section</span><span class="si">}</span><span class="s2">] section. Adjusted to </span><span class="si">{</span><span class="n">lng</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">lng</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">lng</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">:</span>
                <span class="n">lng</span> <span class="o">+=</span> <span class="mi">360</span>
                <span class="n">status_handler</span><span class="o">.</span><span class="n">add_warning</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span> <span class="p">,</span><span class="sa">f</span><span class="s2">&quot;&#39;longitude&#39; was below -180 in the [</span><span class="si">{</span><span class="n">section</span><span class="si">}</span><span class="s2">] section. Adjusted to </span><span class="si">{</span><span class="n">lng</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

            <span class="c1"># Create circular area constraint</span>
            <span class="n">geo_constraint</span> <span class="o">=</span> <span class="n">GeometryConstraint</span><span class="p">(</span>
                <span class="n">coords</span><span class="o">=</span><span class="n">CircleArea</span><span class="p">(</span>
                    <span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span>
                    <span class="n">lng</span><span class="o">=</span><span class="n">lng</span><span class="p">,</span>
                    <span class="n">min_radius</span><span class="o">=</span><span class="n">min_radius</span><span class="p">,</span>
                    <span class="n">max_radius</span><span class="o">=</span><span class="n">max_radius</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="n">geo_constraint_type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># Invalid type provided</span>
            <span class="c1"># Log error for invalid geo_constraint types</span>
            <span class="n">status_handler</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="s2">&quot;input_parameters&quot;</span> <span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;Invalid &#39;geo_constraint&#39; type &#39;</span><span class="si">{</span><span class="n">geo_constraint_type</span><span class="si">}</span><span class="s2">&#39; in the [</span><span class="si">{</span><span class="n">section</span><span class="si">}</span><span class="s2">] section. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Allowed values are &#39;BOUNDING&#39; or &#39;CIRCLE&#39;.&quot;</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">geo_constraint</span>


<div class="viewcode-block" id="SeismoLoaderSettings.to_cfg">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoLoaderSettings.to_cfg">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_cfg</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ConfigParser</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the `SeismoLoaderSettings` instance into a `ConfigParser` object.</span>

<span class="sd">        This method constructs a configuration file representation of the current settings</span>
<span class="sd">        stored in the `SeismoLoaderSettings` instance. It organizes the settings into sections</span>
<span class="sd">        such as `SDS`, `DATABASE`, `PROCESSING`, `AUTH`, `WAVEFORM`, `STATION`, and `EVENT`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            configparser.ConfigParser: A `ConfigParser` object representing the current settings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="p">()</span>

        <span class="c1"># Populate the [SDS] section</span>
        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;SDS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;SDS&#39;</span><span class="p">,</span> <span class="s1">&#39;sds_path&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sds_path</span><span class="p">)</span>

        <span class="c1"># Populate the [DATABASE] section</span>
        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;DATABASE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;DATABASE&#39;</span><span class="p">,</span> <span class="s1">&#39;db_path&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">)</span>

        <span class="c1"># Populate the [PROCESSING] section</span>
        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;PROCESSING&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;PROCESSING&#39;</span><span class="p">,</span> <span class="s1">&#39;num_processes&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">num_processes</span><span class="p">)</span>
        <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;PROCESSING&#39;</span><span class="p">,</span> <span class="s1">&#39;gap_tolerance&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">gap_tolerance</span><span class="p">)</span>
        <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;PROCESSING&#39;</span><span class="p">,</span> <span class="s1">&#39;download_type&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">download_type</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

        <span class="c1"># Populate the [AUTH] section</span>
        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;AUTH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">auths</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">auth</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">auths</span><span class="p">:</span>
                <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;AUTH&#39;</span><span class="p">,</span> <span class="n">auth</span><span class="o">.</span><span class="n">nslc_code</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">auth</span><span class="o">.</span><span class="n">username</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">auth</span><span class="o">.</span><span class="n">password</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


        <span class="c1"># Populate the [WAVEFORM] section</span>
        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;WAVEFORM&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;WAVEFORM&#39;</span><span class="p">,</span> <span class="s1">&#39;client&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span><span class="o">.</span><span class="n">client</span><span class="p">)</span>
        <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;WAVEFORM&#39;</span><span class="p">,</span> <span class="s1">&#39;channel_pref&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span><span class="o">.</span><span class="n">channel_pref</span><span class="p">)</span>
        <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;WAVEFORM&#39;</span><span class="p">,</span> <span class="s1">&#39;location_pref&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span><span class="o">.</span><span class="n">location_pref</span><span class="p">)</span>
        <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;WAVEFORM&#39;</span><span class="p">,</span> <span class="s1">&#39;days_per_request&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span><span class="o">.</span><span class="n">days_per_request</span><span class="p">)</span>

        <span class="c1"># Populate the [STATION] section</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="p">:</span>
            <span class="n">config</span><span class="p">[</span><span class="s1">&#39;STATION&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;client&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">client</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;local_inventory&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">local_inventory</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;force_stations&#39;</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">convert_to_str</span><span class="p">(</span><span class="n">station</span><span class="o">.</span><span class="n">cmb_str</span><span class="p">)</span> <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">force_stations</span> <span class="k">if</span> <span class="n">station</span><span class="o">.</span><span class="n">cmb_str</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]))</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;exclude_stations&#39;</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">convert_to_str</span><span class="p">(</span><span class="n">station</span><span class="o">.</span><span class="n">cmb_str</span><span class="p">)</span> <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">exclude_stations</span> <span class="k">if</span> <span class="n">station</span><span class="o">.</span><span class="n">cmb_str</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]))</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;highest_samplerate_only&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">highest_samplerate_only</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;starttime&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">date_config</span><span class="o">.</span><span class="n">start_time</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;endtime&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">date_config</span><span class="o">.</span><span class="n">end_time</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;network&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">network</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;station&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">station</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;channel&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">channel</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;station&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">station</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>  <span class="c1"># Ensure location is added</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;channel&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">channel</span><span class="p">)</span>    <span class="c1"># Ensure channel is added</span>


            <span class="c1"># FIXME: The settings are updated such that they support multiple geometries.</span>
            <span class="c1"># But config file only accepts one geometry at a time. For now we just get</span>
            <span class="c1"># the first item.</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">geo_constraint</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;geo_type&#39;</span><span class="p">):</span>
                <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;geo_constraint&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geo_type</span><span class="p">)</span>
                
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geo_type</span> <span class="o">==</span> <span class="n">GeoConstraintType</span><span class="o">.</span><span class="n">CIRCLE</span><span class="p">:</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">lng</span><span class="p">)</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;minradius&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">min_radius</span><span class="p">)</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;maxradius&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">max_radius</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geo_type</span> <span class="o">==</span> <span class="n">GeoConstraintType</span><span class="o">.</span><span class="n">BOUNDING</span><span class="p">:</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;minlatitude&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">min_lat</span><span class="p">)</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;maxlatitude&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">max_lat</span><span class="p">)</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;minlongitude&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">min_lng</span><span class="p">)</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;maxlongitude&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">max_lng</span><span class="p">)</span>

            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;includerestricted&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">include_restricted</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;STATION&#39;</span><span class="p">,</span> <span class="s1">&#39;level&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">level</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

        <span class="c1"># Check if the main section is EventConfig or StationConfig and populate accordingly</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="p">:</span>
            <span class="n">config</span><span class="p">[</span><span class="s1">&#39;EVENT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;client&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">client</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;min_depth&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">min_depth</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;max_depth&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">max_depth</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;minmagnitude&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">min_magnitude</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;maxmagnitude&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">max_magnitude</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;minradius&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">min_radius</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;maxradius&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">max_radius</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;after_p_sec&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">after_p_sec</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;before_p_sec&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">before_p_sec</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;includeallorigins&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">include_all_origins</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;includeallmagnitudes&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">include_all_magnitudes</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;includearrivals&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">include_arrivals</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;limit&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">limit</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;offset&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">offset</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;local_catalog&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">local_catalog</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;contributor&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">contributor</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;updatedafter&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">updatedafter</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;eventtype&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">eventtype</span><span class="p">)</span>
            <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;catalog&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">catalog</span><span class="p">)</span>

            <span class="c1"># FIXME: The settings are updated such that they support multiple geometries.</span>
            <span class="c1"># But config file only accepts one geometry at a time.For now we just get</span>
            <span class="c1"># the first item.</span>
         
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">geo_constraint</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;geo_type&#39;</span><span class="p">):</span>
                <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;geo_constraint&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geo_type</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geo_type</span> <span class="o">==</span> <span class="n">GeoConstraintType</span><span class="o">.</span><span class="n">CIRCLE</span><span class="p">:</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">lat</span><span class="p">)</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">lng</span><span class="p">)</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;minsearchradius&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">min_radius</span><span class="p">)</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;maxsearchradius&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">max_radius</span><span class="p">)</span>

                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">geo_type</span> <span class="o">==</span> <span class="n">GeoConstraintType</span><span class="o">.</span><span class="n">BOUNDING</span><span class="p">:</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;minlatitude&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">min_lat</span><span class="p">)</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;maxlatitude&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">max_lat</span><span class="p">)</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;minlongitude&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">min_lng</span><span class="p">)</span>
                    <span class="n">safe_add_to_config</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s1">&#39;EVENT&#39;</span><span class="p">,</span> <span class="s1">&#39;maxlongitude&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">geo_constraint</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">max_lng</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">config</span></div>


<div class="viewcode-block" id="SeismoLoaderSettings.add_to_config">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoLoaderSettings.add_to_config">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_to_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">config_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;sds_path&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sds_path</span><span class="p">,</span>
            <span class="s1">&#39;db_path&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_path</span><span class="p">,</span>
            <span class="s1">&#39;processing&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;num_processes&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">num_processes</span><span class="p">,</span>
                <span class="s1">&#39;gap_tolerance&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">gap_tolerance</span><span class="p">,</span>
            <span class="p">},</span>            
            <span class="s1">&#39;download_type&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">download_type</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">download_type</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s1">&#39;auths&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">auths</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">auths</span> <span class="k">else</span> <span class="p">[],</span>
            <span class="s1">&#39;waveform&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;client&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span><span class="o">.</span><span class="n">client</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span><span class="o">.</span><span class="n">client</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;channel_pref&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span><span class="o">.</span><span class="n">channel_pref</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;location_pref&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span><span class="o">.</span><span class="n">location_pref</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;days_per_request&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span><span class="o">.</span><span class="n">days_per_request</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span><span class="o">.</span><span class="n">days_per_request</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;force_redownload&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span><span class="o">.</span><span class="n">force_redownload</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> 
            <span class="p">},</span>
            <span class="s1">&#39;station&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;client&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">client</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">client</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;local_inventory&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">local_inventory</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;force_stations&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">station</span><span class="o">.</span><span class="n">cmb_str</span> <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">force_stations</span> <span class="k">if</span> <span class="n">station</span><span class="o">.</span><span class="n">cmb_str</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">force_stations</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="p">[],</span>
                <span class="s1">&#39;exclude_stations&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">station</span><span class="o">.</span><span class="n">cmb_str</span> <span class="k">for</span> <span class="n">station</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">exclude_stations</span> <span class="k">if</span> <span class="n">station</span><span class="o">.</span><span class="n">cmb_str</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">exclude_stations</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="p">[],</span>
                <span class="s1">&#39;highest_samplerate_only&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">highest_samplerate_only</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;starttime&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">date_config</span><span class="o">.</span><span class="n">start_time</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">date_config</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;endtime&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">date_config</span><span class="o">.</span><span class="n">end_time</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">date_config</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;startbefore&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">date_config</span><span class="o">.</span><span class="n">start_before</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">date_config</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;startafter&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">date_config</span><span class="o">.</span><span class="n">start_after</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">date_config</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;endbefore&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">date_config</span><span class="o">.</span><span class="n">end_before</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">date_config</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;endafter&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">date_config</span><span class="o">.</span><span class="n">end_after</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">date_config</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;network&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">network</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;station&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">station</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;location&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">location</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;channel&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">channel</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;geo_constraint&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">geo_constraint</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;includerestricted&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">include_restricted</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;level&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">level</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span><span class="o">.</span><span class="n">level</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s1">&#39;event&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;client&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">client</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">client</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">model</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">model</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;before_p_sec&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">before_p_sec</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">before_p_sec</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;after_p_sec&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">after_p_sec</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">after_p_sec</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;starttime&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">date_config</span><span class="o">.</span><span class="n">start_time</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">date_config</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;endtime&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">date_config</span><span class="o">.</span><span class="n">end_time</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">date_config</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;min_depth&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">min_depth</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">min_depth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;max_depth&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">max_depth</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">max_depth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;minmagnitude&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">min_magnitude</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">min_magnitude</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;maxmagnitude&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">max_magnitude</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">max_magnitude</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;minradius&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">min_radius</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">min_radius</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;maxradius&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">max_radius</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">max_radius</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;local_catalog&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">local_catalog</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;geo_constraint&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">geo_constraint</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;includeallorigins&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">include_all_origins</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;includeallmagnitudes&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">include_all_magnitudes</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;includearrivals&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">include_arrivals</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;limit&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">limit</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;offset&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">offset</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;contributor&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">contributor</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">contributor</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;eventtype&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">eventtype</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">eventtype</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;catalog&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">catalog</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">catalog</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s1">&#39;updatedafter&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">updatedafter</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">updatedafter</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">config_dict</span></div>



<div class="viewcode-block" id="SeismoLoaderSettings.add_prediction">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoLoaderSettings.add_prediction">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_prediction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">station_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">p_arrival</span><span class="p">:</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">s_arrival</span><span class="p">:</span> <span class="n">datetime</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a predicted P-wave and S-wave arrival time for a given event and station.</span>

<span class="sd">        Args:</span>
<span class="sd">            event_id (str): The unique identifier of the seismic event.</span>
<span class="sd">            station_id (str): The identifier of the seismic station.</span>
<span class="sd">            p_arrival (datetime): The predicted arrival time of the P-wave.</span>
<span class="sd">            s_arrival (datetime): The predicted arrival time of the S-wave.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">event_id</span><span class="si">}</span><span class="s2">|</span><span class="si">{</span><span class="n">station_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">predictions</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">PredictionData</span><span class="p">(</span>
            <span class="n">event_id</span><span class="o">=</span><span class="n">event_id</span><span class="p">,</span>
            <span class="n">station_id</span><span class="o">=</span><span class="n">station_id</span><span class="p">,</span>
            <span class="n">p_arrival</span><span class="o">=</span><span class="n">p_arrival</span><span class="p">,</span>
            <span class="n">s_arrival</span><span class="o">=</span><span class="n">s_arrival</span>
        <span class="p">)</span></div>


<div class="viewcode-block" id="SeismoLoaderSettings.get_prediction">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoLoaderSettings.get_prediction">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_prediction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">station_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PredictionData</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the predicted arrival time for a given event and station.</span>

<span class="sd">        Args:</span>
<span class="sd">            event_id (str): The unique identifier of the seismic event.</span>
<span class="sd">            station_id (str): The identifier of the seismic station.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[PredictionData]: The predicted arrival time data, or `None` if not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">event_id</span><span class="si">}</span><span class="s2">|</span><span class="si">{</span><span class="n">station_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">predictions</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span></div>

<div class="viewcode-block" id="SeismoLoaderSettings.Config">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoLoaderSettings.Config">[docs]</a>
    <span class="k">class</span><span class="w"> </span><span class="nc">Config</span><span class="p">:</span>
        <span class="n">arbitrary_types_allowed</span> <span class="o">=</span> <span class="kc">True</span>       
        <span class="n">json_encoders</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">datetime</span><span class="p">:</span> <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="n">v</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="p">}</span></div>


<div class="viewcode-block" id="SeismoLoaderSettings.to_pickle">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoLoaderSettings.to_pickle">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">to_pickle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pickle_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serializes the `SeismoLoaderSettings` instance to a pickle file.</span>

<span class="sd">        Args:</span>
<span class="sd">            pickle_path (str): The file path where the object should be saved.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">pickle_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="SeismoLoaderSettings.from_pickle_file">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoLoaderSettings.from_pickle_file">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_pickle_file</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">pickle_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SeismoLoaderSettings&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads a `SeismoLoaderSettings` instance from a pickle file.</span>

<span class="sd">        Args:</span>
<span class="sd">            pickle_path (str): The file path from which the object should be loaded.</span>

<span class="sd">        Returns:</span>
<span class="sd">            SeismoLoaderSettings: The loaded instance of the class.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">pickle_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span></div>

        

<div class="viewcode-block" id="SeismoLoaderSettings.has_changed">
<a class="viewcode-back" href="../../../seed_vault.models.html#seed_vault.models.config.SeismoLoaderSettings.has_changed">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">has_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">old_settings</span><span class="p">:</span> <span class="s2">&quot;SeismoLoaderSettings&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compare self with old_settings and return a dictionary indicating which parts have changed.</span>

<span class="sd">        Args:</span>
<span class="sd">            old_settings (SeismoLoaderSettings): The old settings to compare against.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, bool]: A dictionary with keys indicating which properties changed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">changes</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;has_changed&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;event&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;station&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;waveform&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;settings&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">old_settings</span><span class="p">,</span> <span class="n">SeismoLoaderSettings</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;old_settings must be an instance of SeismoLoaderSettings&quot;</span><span class="p">)</span>

        <span class="c1"># Compare each component and update the dictionary accordingly</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">event</span> <span class="o">!=</span> <span class="n">old_settings</span><span class="o">.</span><span class="n">event</span><span class="p">:</span>
            <span class="n">changes</span><span class="p">[</span><span class="s2">&quot;event&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">changes</span><span class="p">[</span><span class="s2">&quot;has_changed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">station</span> <span class="o">!=</span> <span class="n">old_settings</span><span class="o">.</span><span class="n">station</span><span class="p">:</span>
            <span class="n">changes</span><span class="p">[</span><span class="s2">&quot;station&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">changes</span><span class="p">[</span><span class="s2">&quot;has_changed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">waveform</span> <span class="o">!=</span> <span class="n">old_settings</span><span class="o">.</span><span class="n">waveform</span><span class="p">:</span>
            <span class="n">changes</span><span class="p">[</span><span class="s2">&quot;waveform&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">changes</span><span class="p">[</span><span class="s2">&quot;has_changed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sds_path</span> <span class="o">!=</span> <span class="n">old_settings</span><span class="o">.</span><span class="n">sds_path</span> <span class="ow">or</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">db_path</span> <span class="o">!=</span> <span class="n">old_settings</span><span class="o">.</span><span class="n">db_path</span> <span class="ow">or</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">processing</span> <span class="o">!=</span> <span class="n">old_settings</span><span class="o">.</span><span class="n">processing</span> <span class="ow">or</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">auths</span> <span class="o">!=</span> <span class="n">old_settings</span><span class="o">.</span><span class="n">auths</span>
            <span class="p">):</span>
            <span class="n">changes</span><span class="p">[</span><span class="s2">&quot;settings&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">changes</span><span class="p">[</span><span class="s2">&quot;has_changed&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">return</span> <span class="n">changes</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, CSIRO.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>